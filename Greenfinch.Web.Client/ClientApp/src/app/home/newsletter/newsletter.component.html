<section class="fdb-block">
  <div class="container py-4">
    <div class="row py-5">
      <div class="col py-5">
        <div class="fdb-box fdb-touch">
          <div class="row text-center justify-content-center">
            <div class="col-12 col-md-9 col-lg-7">
              <h1>Stay in the Know!</h1>
              <p class="lead pb-3">Sign up for emails to get the scoop on new arrivals.</p>
            </div>
          </div>
          <form [formGroup]="newsletterForm" (submit)="onSubmit()">
            <input type="hidden" formControlName="form" />
            <div class="row">
              <div class="col-12 col-md mt-4 mt-md-0">
                <input
                  type="email"
                  id="email"
                  class="form-control"
                  placeholder="Enter your email address *"
                  aria-label="Enter your email address"
                  formControlName="email"
                  required
                  aria-required="true"
                  attr.aria-invalid="{{ (email.dirty || email.touched) && email.invalid ? true : false }}"
                  aria-errormessage="valid-email"
                  autocomplete="off"
                  [ngClass]="{ 'is-invalid': (email.dirty || email.touched) && email.invalid }"
                />
                <div *ngIf="(email.dirty || email.touched) && email.invalid" class="invalid-feedback">
                  <div *ngIf="(email.dirty || email.touched) && email.invalid && !!email.errors.required">
                    Email is required
                  </div>
                  <div *ngIf="(email.dirty || email.touched) && email.invalid && !!email.errors.email">
                    The entered value must be a valid email address
                  </div>
                  <div *ngIf="(email.dirty || email.touched) && email.invalid && !!email.errors.existingEmail">
                    The entered email has already been signed up.
                  </div>
                </div>
              </div>
            </div>
            <div class="row mt-4">
              <div class="col-12 col-md">
                <select
                  class="form-control placeholder"
                  required
                  aria-label="How did you hear about us?"
                  aria-required="true"
                  attr.aria-invalid="{{ (referrer.dirty || referrer.touched) && referrer.invalid ? true : false }}"
                  aria-errormessage="referrer-required"
                  formControlName="referrer"
                  [ngClass]="{ 'is-invalid': (referrer.dirty || referrer.touched) && referrer.invalid }"
                  id="exampleFormControlSelect1"
                >
                  <option [ngValue]="null" disabled selected>How did you hear about us? *</option>
                  <option>Advert</option>
                  <option>Word of Mouth</option>
                  <option>Other</option>
                </select>

                <div
                  *ngIf="(referrer.dirty || referrer.touched) && referrer.invalid && !!referrer.errors.required"
                  class="invalid-feedback"
                >
                  <div>How did you hear about us is required</div>
                </div>
              </div>
            </div>
            <div class="row mt-4">
              <div class="col">
                <input
                  type="text"
                  class="form-control"
                  attr.aria-invalid="{{ (reason.dirty || reason.touched) && reason.invalid ? true : false }}"
                  aria-label="Reason for signing up. This is optional but helpful"
                  aria-required="false"
                  placeholder="Why are you signing up?"
                  formControlName="reason"
                />
              </div>
            </div>
            <div class="row mt-4">
              <div class="col text-center">
                <button role="button" type="submit" [disabled]="!newsletterForm.valid" class="btn btn-primary">
                  Sign Me Up
                </button>
              </div>
            </div>
          </form>
          <p class="h5 mt-4 text-center">
            <em>Your email address is safe with us. We never share your email address.</em>
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
